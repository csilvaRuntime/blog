<h1>Users listing page</h1>

<table>
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>State</th>
    </tr>
    <% @users.each do |user| %>
    <tr>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td><%= user.user_role %></td>
        <td><%= user.state %></td>
        <% if user.state == "active" %>
        <td><%= button_to "Deactivate User", user_path(user, user: {state: "inactive"}), method: :put%></td>
        <% else %>
        <td><%= button_to "Activate User", user_path(user, user: {state: "active"}), method: :put%></td>
        <% end %>
        <td><%= button_to 'View', user_path(user.id), method: :get%></td>
        <td><%= button_to 'Delete', user_path(user.id), method: :delete %></td>
    </tr>
    <% end %>
</table>

<%= link_to 'New User', new_user_path %>